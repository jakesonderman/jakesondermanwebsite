<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>ASCII Audio Visualizer - Jake Sonderman</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#000000" VLINK="#000000" ALINK="#000000">
<TABLE WIDTH="100%" BORDER="0" CELLPADDING="20" CELLSPACING="0">
<TR>
<TD>
<CENTER>
<FONT SIZE="+3" FACE="Courier" COLOR="#000000"><B>ASCII AUDIO VISUALIZER</B></FONT>
<BR><BR>
<FONT SIZE="+1" FACE="Courier" COLOR="#000000">Drop an audio file below or click to select</FONT>
<BR><BR>
<DIV ID="dropZone" STYLE="border: 3px dashed #000000; padding: 40px; margin: 20px auto; width: 80%; background-color: #FFFFFF; cursor: pointer; text-align: center;">
<FONT FACE="Courier" SIZE="+1" COLOR="#000000">
<B>DRAG & DROP AUDIO FILE HERE</B><BR>
OR CLICK TO SELECT
</FONT>
</DIV>
<INPUT TYPE="FILE" ID="fileInput" ACCEPT="audio/*" STYLE="display: none;">
<BR><BR>
<DIV ID="audioInfo" STYLE="font-family: Courier; font-size: 14px; margin: 10px; display: none;">
<B>Now Playing:</B> <SPAN ID="fileName"></SPAN>
</DIV>
<BR>
<AUDIO ID="audioPlayer" CONTROLS STYLE="width: 80%; max-width: 600px; display: none;">
Your browser does not support the audio element.
</AUDIO>
<BR><BR>
<CENTER>
<INPUT TYPE="BUTTON" ID="playBtn" VALUE="PLAY" ONCLICK="togglePlay()" STYLE="font-family: Courier; font-size: 14px; padding: 10px 20px; margin: 5px; border: 2px solid #000000; background-color: #FFFFFF; cursor: pointer; display: none;">
<INPUT TYPE="BUTTON" ID="pauseBtn" VALUE="PAUSE" ONCLICK="togglePause()" STYLE="font-family: Courier; font-size: 14px; padding: 10px 20px; margin: 5px; border: 2px solid #000000; background-color: #FFFFFF; cursor: pointer; display: none;">
</CENTER>
<BR><BR>
<PRE ID="scopeVisualizer" STYLE="font-family: Courier; font-size: 10px; background-color: #000000; color: #00FF00; padding: 20px; margin: 20px auto; width: 90%; max-width: 800px; height: 300px; overflow: hidden; display: none; border: 2px solid #000000; line-height: 1.2;"></PRE>
<BR><BR>
<CENTER>
<A HREF="index.html"><FONT FACE="Courier" COLOR="#000000">HOME</FONT></A> | 
<A HREF="games.html"><FONT FACE="Courier" COLOR="#000000">GAMES</FONT></A> | 
<A HREF="jeremy.html"><FONT FACE="Courier" COLOR="#000000">JEREMY</FONT></A> | 
<A HREF="contact.html"><FONT FACE="Courier" COLOR="#000000">CONTACT</FONT></A>
</CENTER>
</TD>
</TR>
</TABLE>
<SCRIPT>
var audioPlayer = document.getElementById('audioPlayer');
var fileInput = document.getElementById('fileInput');
var dropZone = document.getElementById('dropZone');
var audioInfo = document.getElementById('audioInfo');
var fileName = document.getElementById('fileName');
var playBtn = document.getElementById('playBtn');
var pauseBtn = document.getElementById('pauseBtn');
var scopeVisualizer = document.getElementById('scopeVisualizer');

// Web Audio API setup
var audioContext = null;
var analyser = null;
var dataArray = null;
var animationFrameId = null;

// Click drop zone to select file
dropZone.onclick = function() {
  fileInput.click();
};

// File input change
fileInput.onchange = function(e) {
  var file = e.target.files[0];
  if(file) {
    loadAudioFile(file);
  }
};

// Drag and drop handlers
dropZone.ondragover = function(e) {
  e.preventDefault();
  e.stopPropagation();
  dropZone.style.backgroundColor = '#F0F0F0';
};

dropZone.ondragleave = function(e) {
  e.preventDefault();
  e.stopPropagation();
  dropZone.style.backgroundColor = '#FFFFFF';
};

dropZone.ondrop = function(e) {
  e.preventDefault();
  e.stopPropagation();
  dropZone.style.backgroundColor = '#FFFFFF';
  
  var files = e.dataTransfer.files;
  if(files.length > 0) {
    var file = files[0];
    if(file.type.startsWith('audio/')) {
      loadAudioFile(file);
    } else {
      alert('Please drop an audio file (MP3, WAV, OGG, etc.)');
    }
  }
};

function loadAudioFile(file) {
  var reader = new FileReader();
  
  reader.onload = function(e) {
    var audioUrl = e.target.result;
    audioPlayer.src = audioUrl;
    fileName.textContent = file.name;
    audioInfo.style.display = 'block';
    audioPlayer.style.display = 'block';
    playBtn.style.display = 'inline-block';
    pauseBtn.style.display = 'inline-block';
    
    // Setup Web Audio API
    setupAudioContext();
  };
  
  reader.readAsDataURL(file);
}

function setupAudioContext() {
  // Create audio context if it doesn't exist
  if(!audioContext) {
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioContext.createAnalyser();
    analyser.fftSize = 2048;
    analyser.smoothingTimeConstant = 0.8;
    
    // Connect audio element to analyser
    var source = audioContext.createMediaElementSource(audioPlayer);
    source.connect(analyser);
    analyser.connect(audioContext.destination);
    
    // Create data array for waveform data
    var bufferLength = analyser.frequencyBinCount;
    dataArray = new Uint8Array(bufferLength);
    
    // Show visualizer
    scopeVisualizer.style.display = 'block';
    
    // Start visualization loop
    visualize();
  }
}

function visualize() {
  if(!analyser || !dataArray) return;
  
  // Cancel any existing animation
  if(animationFrameId) {
    cancelAnimationFrame(animationFrameId);
  }
  
  function draw() {
    // Only visualize if audio is playing
    if(!audioPlayer.paused && !audioPlayer.ended) {
      // Get waveform data
      analyser.getByteTimeDomainData(dataArray);
      
      // Create ASCII scope visualization
      var width = 80;
      var height = 20;
      var output = '';
      
      // Create grid
      for(var y = 0; y < height; y++) {
        var line = '';
        for(var x = 0; x < width; x++) {
          // Map x to dataArray index
          var dataIndex = Math.floor((x / width) * dataArray.length);
          var value = dataArray[dataIndex];
          
          // Normalize value (0-255) to height (0-height-1)
          var normalizedValue = (value / 255) * (height - 1);
          var yPos = height - 1 - Math.floor(normalizedValue);
          
          // Center line
          var centerY = Math.floor(height / 2);
          
          if(y === centerY) {
            line += '-'; // Center line
          } else if(y === yPos) {
            line += '*'; // Waveform point
          } else if(Math.abs(y - yPos) === 1 && y !== centerY) {
            line += '.'; // Near waveform
          } else {
            line += ' '; // Empty space
          }
        }
        output += line + '\n';
      }
      
      scopeVisualizer.textContent = output;
      
      animationFrameId = requestAnimationFrame(draw);
    } else {
      // Clear when paused
      scopeVisualizer.textContent = '';
    }
  }
  
  draw();
}

function togglePlay() {
  audioPlayer.play();
  // Resume audio context if suspended (browser autoplay policy)
  if(audioContext && audioContext.state === 'suspended') {
    audioContext.resume();
  }
  visualize();
}

function togglePause() {
  audioPlayer.pause();
}

// Update button states based on audio playback
audioPlayer.onplay = function() {
  playBtn.style.display = 'none';
  pauseBtn.style.display = 'inline-block';
};

audioPlayer.onpause = function() {
  playBtn.style.display = 'inline-block';
  pauseBtn.style.display = 'none';
};

audioPlayer.onended = function() {
  playBtn.style.display = 'inline-block';
  pauseBtn.style.display = 'none';
};
</SCRIPT>
</BODY>
</HTML>

